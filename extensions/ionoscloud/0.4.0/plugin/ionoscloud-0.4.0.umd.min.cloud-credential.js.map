{"version":3,"file":"ionoscloud-0.4.0.umd.min.cloud-credential.js","mappings":"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","sources":["webpack://ionoscloud-0.4.0/./cloud-credential/ionoscloud.vue","webpack://ionoscloud-0.4.0/./cloud-credential/ionoscloud.vue?ea2c"],"sourcesContent":["<script>\n\nimport Banner from '@components/Banner/Banner.vue';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { SECRET } from '@shell/config/types';\nimport { _CREATE } from '@shell/config/query-params';\n\nexport default {\n  components: {\n    Banner,\n    LabeledInput,\n    LabeledSelect,\n  },\n\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    this.driver = await this.$store.dispatch('rancher/find', {\n      type: 'nodedriver',\n      id:   'ionoscloud'\n    });\n    this.value.setData('endpoint', 'https://api.ionos.com/cloudapi/v6')\n\n    const secret = await this.$store.dispatch('management/find', { type: SECRET, id: this.value.id.replace(':', '/') });\n    this.value.setData('username', atob(secret.data['ionoscloudcredentialConfig-username']));\n    this.value.setData('endpoint', atob(secret.data['ionoscloudcredentialConfig-endpoint']));\n  },\n\n  data() {\n    return {\n      busy:           false,\n      driver:         {},\n      allowBusy:      false,\n      error:          '',\n    };\n  },\n\n  watch: {\n    'value.decodedData.username'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n\n    'value.decodedData.password'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n\n    'value.decodedData.token'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n\n    'value.decodedData.endpoint'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n  },\n\n  computed: {\n\n    canAuthenticate() {\n      return !!this.value?.decodedData?.token ||\n        !!this.value?.decodedData?.username &&\n        !!this.value?.decodedData?.password;\n    }\n  },\n\n  created() {\n    this.$emit('validationChanged', false);\n  },\n\n  methods: {\n    test() {\n      return true;\n    },\n\n    clear() {\n      // Tell parent that the form is not invalid\n      this.$emit('validationChanged', false);\n    },\n  },\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.username\"\n          class=\"mt-20\"\n          label-key=\"driver.ionoscloud.auth.fields.username\"\n          placeholder-key=\"driver.ionoscloud.auth.placeholders.username\"\n          type=\"text\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('username', $event);\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          :value=\"value.decodedData.password\"\n          class=\"mt-20\"\n          label-key=\"driver.ionoscloud.auth.fields.password\"\n          placeholder-key=\"driver.ionoscloud.auth.placeholders.password\"\n          type=\"password\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('password', $event);\"\n        />\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col span-12\">\n        <LabeledInput\n          :value=\"value.decodedData.token\"\n          class=\"mt-20\"\n          label-key=\"driver.ionoscloud.auth.fields.token\"\n          placeholder-key=\"driver.ionoscloud.auth.placeholders.token\"\n          type=\"text\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('token', $event);\"\n        />\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col span-12\">\n        <LabeledInput\n          :value=\"value.decodedData.endpoint || 'https://api.ionos.com/cloudapi/v6'\"\n          class=\"mt-20\"\n          label-key=\"driver.ionoscloud.auth.fields.endpoint\"\n          placeholder-key=\"driver.ionoscloud.auth.placeholders.endpoint\"\n          type=\"text\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('endpoint', $event);\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n","import { render } from \"./ionoscloud.vue?vue&type=template&id=37917334\"\nimport script from \"./ionoscloud.vue?vue&type=script&lang=js\"\nexport * from \"./ionoscloud.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_LabeledInput","value","$props","decodedData","username","type","mode","_cache","$event","setData","_hoisted_3","password","_hoisted_4","_hoisted_5","token","_hoisted_6","_hoisted_7","endpoint","components","Banner","LabeledInput","LabeledSelect","props","String","required","Object","fetch","this","driver","$store","dispatch","id","secret","SECRET","replace","atob","data","busy","allowBusy","error","watch","neu","$emit","computed","canAuthenticate","created","methods","test","clear","__exports__","render"],"sourceRoot":""}